<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="../css/buttons.css" />
</head>
<body>

<p id="demo" onclick="myFunction()">Click me to run the code.</p>

  <script type="text/javascript" src="../src/hello.js"></script>
  <script type="text/javascript" src="../src/primes.js"></script>

  <a class="btn-blue" onclick="calc_primes(); return false;" href="">Click me</a> 

  <a class="btn-orange" onclick="myFunction2(); return false;" href="">Click me</a>

  <p id="calc-primes-result">Result</p>

  <p id="timer-value">Timer</p>

<button onclick="startPrimesGeneration()">Start Primes Generation</button>
<button onclick="stopPrimesGeneration()">Stop Primes Generation</button>
<script>
var timerPrimesGeneration;
function startPrimesGeneration() {
  if(typeof(timerPrimesGeneration) !== "undefined") {
    return;
  }
  timerPrimesGeneration = Timer.start(ourUpdater);
}

function stopPrimesGeneration() {
  Timer.stop(timerPrimesGeneration);
  timerPrimesGeneration = undefined;
}

function ourUpdater(x) {
  document.getElementById("timer-value").innerHTML = x;
}

</script>

<script>
class Timer {
  static start(updater) {
    if(typeof(Worker) == "undefined") {
      Timer.timerUpdate(targetName, "Sorry! No Web Worker support.");
      return;
    }
    return new Timer(updater);
  }

  static stop(x) {
    if(typeof(x) == "undefined") {
      return;
    }  
    x.minion.terminate();
  } 

  constructor(funcUpdater) {
    this.updater = funcUpdater;
    this.minion = Timer.createTimer();
    this.minion.onmessage = function(event) {
      funcUpdater(event.data);
    };   
  }

  static createTimer() {
    // "Server response", used in all examples
    var response = "var i = 0; function timedCount() { i = i + 1; postMessage(i); setTimeout('timedCount()',500); } timedCount();";

    var blob;
    try {
      blob = new Blob([response], {type: 'application/javascript'});
    } catch (e) { // Backwards-compatibility
      window.BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder;
      blob = new BlobBuilder();
      blob.append(response);
      blob = blob.getBlob();
    }
    // URL.createObjectURL
    window.URL = window.URL || window.webkitURL;
    return new Worker(URL.createObjectURL(blob));
  }
}

</script>

</body>
</html>

